# Optional
- null 参照は歴史的にプログラミング言語で導入され、一般的に値の不在を示します。
- Java 8 java.util.Optional<T>は、値の有無をモデル化するクラスを導入します。
- あなたは、作成することができOptional、静的なファクトリメソッドを持つオブジェクトをOptional.empty、Optional.ofとOptional.ofNullable。
- Optionalクラスは、次のような多くの方法をサポートしmap、flatMapおよびfilterストリームの方法と概念的に類似しています。
- 値を使用Optionalしない場合は、オプションを積極的にアンラップして強制的に使用します。その結果、意図しないnullポインタ例外からコードを保護します。
- Optionalを使用すると、メソッドのシグネチャを読み取るだけで、ユーザーがオプションの値を期待するかどうかを判断できる、より優れたAPIを設計できます。


## null参照の問題
- エラーの原因になる NullPointerExceptionは、Javaでは圧倒的に最も一般的な例外です。
- コードを肥大化させます。深く入れ子になったヌルチェックでコードを埋める必要があり、可読性を悪化させます。
- 意味がありません。特に、静的型付けされた言語で値が存在しないことをモデル化するための間違った方法を表しています。
- これはJavaの哲学を壊しています。Javaは、1つのケースを除いて、常にポインタを開発者から隠しています: NULLポインタです。
- これは型システムに穴を開けてしまいます。これは、システムの別の部分に伝搬したときに、
そのnullが最初は何であると思われていたのかがわからなくなってしまうという問題です。

### 他言語の対応
groovynの場合は、ナビゲーション演算子（ ?.）
```groovy
def carInsuranceName = person?.car?.insurance?.name
```

HaskellやScalaのような他の関数型言語では、異なる見解を持っています。
Haskell には Maybe 型があり、これは基本的にオプションの値をカプセル化しています。
Maybe型の値は、指定された型の値を含むこともあれば、何も含まないこともあります。
null参照という概念はありません。  
  
Scalaには、T型の値の有無をカプセル化するOption[T]という同様の構文があります。

### Java8(HaskellとScalaのアイデア)
java.util.Optional<T>！という新しいクラスを導入することで、　　
この「オプション値」のアイデアからインスピレーションを得ています。　　

null参照を割り当てるのではなく、存在しない可能性のある値をモデル化するためにそれを使用する利点を示します。

#### 目的　　
Optionalクラスの意図は、すべてのnull参照を置き換えることではないということです。  
むしろ、その目的は、メソッドのシグネチャを読むだけで、オプションの値を期待するかどうかがわかるように、より理解しやすいAPIを設計するのを助けることにあります。
Java 言語アーキテクトのブライアン・ゲッツは、Optional の目的は optional-return イディオムのみをサポートすることであると明言しています。

### optionalでの値取得対応
- get() は最も単純なメソッドです
> これらのメソッドの中では最も安全性が低いメソッドでもあります。これは、ラップされた値が存在する場合はその値を返しますが、そうでない場合は NoSuchElementException をスローします。この理由から、本当に optional に値が含まれていることを確信している場合を除き、このメソッドを使用することはほとんどの場合で悪い考えとなります。さらに、このメソッドは入れ子になった null チェックよりもあまり改善されていません。

- orElse(T other) 
> オプションに値が含まれていない場合のデフォルト値を提供することができます。

- orElseGet(Supplier<? extends T> other) 
> オプションに値が含まれていない場合にのみサプライヤが呼び出されるため、 orElse メソッドの遅延対応です。このメソッドは、デフォルト値を作成するのに時間がかかる場合 (少し効率を上げるため) や、オプションが空の場合にのみ実行されるようにしたい場合 (この場合は厳密に必要です) のどちらかに使用します。

- orElseThrow(Supplier<? extends X> exceptionSupplier) 
> オプションが空の場合に例外を投げるという点で get メソッドと似ていますが、この場合は投げる例外の種類を選択することができます。

- ifPresent(Consumer<? super T> consumer) 
> 値が存在する場合に引数として与えられたアクションを実行します。
